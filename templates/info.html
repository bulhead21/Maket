<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <link href="../static/css/style.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com" rel="preconnect"/>
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
  <link href="https://fonts.googleapis.com/css2?family=Forum&amp;family=Tinos&amp;display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com" rel="preconnect"/>
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
  <link href="https://fonts.googleapis.com/css2?family=Gelasio:wght@600&amp;display=swap" rel="stylesheet"/>
  <title data-i18n="digitalkz">
   Digital.kz
  </title>
  <script src="/static/js/translate.js" defer></script>
 </head>
 <body>
  <div class="header-top">
   <div class="icon">
    <a class="flag" href="/index">
     <img alt="" src="../static/img/logo.png" width="73px"/>
    </a>
   </div>
   <div class="nav">
    <a class="nav-item" data-i18n="" href="/index">
     Главная
    </a>
    <a class="nav-item" data-i18n="faq" href="/faq">
     FAQ
    </a>
   </div>
   <script src="https://cdn.lordicon.com/lordicon-1.1.0.js">
   </script>
   <div class="icons">
    <div class="settings">
     <script src="https://cdn.lordicon.com/lordicon-1.1.0.js">
     </script>
     <div class="search">
      <input class="search_input" id="searchInput" placeholder="Type to search" type="search"/>
      <button>
       <i class="fa fa-search">
        <lord-icon src="https://cdn.lordicon.com/kkvxgpti.json" style="width:46px;height:46px;color:#fff;" trigger="hover">
        </lord-icon>
       </i>
      </button>
     </div>
    </div>
    {% if not current_user.is_authenticated %}
    <a class="animated-icon3" href="/user_reg">
     <lord-icon src="https://cdn.lordicon.com/kthelypq.json" style="width:48px;height:48px" trigger="hover">
     </lord-icon>
    </a>
    {% else %}
    <a class="animated-icon3" href="/private_office">
     <lord-icon src="https://cdn.lordicon.com/kthelypq.json" style="width:48px;height:48px" trigger="hover">
     </lord-icon>
    </a>
    {% endif %}
   </div>
  </div>
  <script>
let currentLang = 'ru';

async function loadTranslations(lang) {
  try {
    const res = await fetch(`/static/locales/${lang}.json`);
    const translations = await res.json();

    document.querySelectorAll('[data-i18n]').forEach(elem => {
      const key = elem.innerText.trim();
      if (translations[key]) {
        elem.innerText = translations[key];
      }
    });
  } catch (err) {
    console.error("Ошибка загрузки перевода:", err);
  }
}

function setLanguage(lang) {
  currentLang = lang;
  loadTranslations(lang);
}

// При старте грузим дефолт
loadTranslations(currentLang);
</script>
 </body>
</html>
